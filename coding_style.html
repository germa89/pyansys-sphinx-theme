
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coding Style and Best Practices &#8212; pyansys_sphinx_theme 0.1.dev0 documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="pyansys_sphinx_theme.samples.Complex.abs" href="api/pyansys_sphinx_theme.samples.Complex.abs.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><style>
    .navbar-light {
        background-color: black !important;
    }
</style>

<div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="index.html">
  <img src="_static/https://docs.pyansys.com/_static/pyansys-logo-black-cropped.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon" >
      <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
    </span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="usage.html">
  Using this Theme
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="style.html">
  Documentation Style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="class_documentation.html">
  Generate APIs Documentation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Coding Style and Best Practices
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pyansys-sphinx-theme" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deprecation-best-practice">
   Deprecation Best-Practice
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes-regarding-semantic-versioning-and-api-changes">
   Notes Regarding Semantic Versioning and API Changes
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="coding-style-and-best-practices">
<h1>Coding Style and Best Practices<a class="headerlink" href="#coding-style-and-best-practices" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Until we have a site up for our best practices and coding style,
the sphinx documentation site will host the coding style as well.</p>
</div>
<p>This page describes coding best practices applicable to the <a class="reference external" href="https://pypi.org/project/pyansys/">pyansys</a> project.  The purpose of this
page is not to repeat coding style documentation, but rather to state
the approach used by the pyansys project when there are any
delineations, clarifications, or additional procedures above and
beyond <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>.</p>
<p>For example, deprecation best practices are outlined in a <a class="reference external" href="https://stackoverflow.com/questions/2536307">Stack
Overflow Answer</a> and
there’s even a <a class="reference external" href="https://deprecation.readthedocs.io/">Deprecation library</a> but there is no official
guidance regarding deprecating features in an API within Python.  This
document seeks to clarify this issue and others.</p>
<p>Aside from pyansys specific directives, the best coding practice is to simply
follow established guidelines from <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>.</p>
<div class="section" id="deprecation-best-practice">
<h2>Deprecation Best-Practice<a class="headerlink" href="#deprecation-best-practice" title="Permalink to this headline">¶</a></h2>
<p>Whenever a method, class, or function is deprecated, we must provide
an old method that calls the new method and raises a warning, or raise
an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> if the method has been removed
altogether. Provide a <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directive-deprecated">Sphinx Deprecated Directive</a>
in the docstring of the older method and link to the newer method.</p>
<p>This way, when API changes are made we give the user a chance to
change theirs too or at least be notified when it changes. Otherwise,
they’ll simply stop upgrading, or worse, using our API due to
stability concerns. For this reason, it’s best to use a warning first
and then using an error after a minor release or two.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FieldAnalysis2D</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Class docstring&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">assignmaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">mat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a material to one or more objects.</span>

<span class="sd">        .. deprecated:: 0.4.0</span>
<span class="sd">           Use :func:`FieldAnalysis2D.assign_material` instead.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># one of the following:</span>

        <span class="c1"># raise a DeprecationWarning.  User won&#39;t have to change anything</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;assignmaterial is deprecated.  Please use assign_material instead&#39;</span><span class="p">,</span>
                      <span class="n">warnings</span><span class="o">.</span><span class="n">DeprecationWarning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_material</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>

        <span class="c1"># or raise an AttributeError (could also make a custom DeprecationError)</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">&#39;assignmaterial is deprecated.  Please use assign_material instead&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">mat</span><span class="p">):</span>
        <span class="s2">&quot;&quot;&quot;Assign a material to one or more objects.</span>
<span class="s2">        ...</span>
</pre></div>
</div>
<p>If a method is outright removed, there’s no change to provide a link
to the old method, and we should simply raise an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>
should this be part of a class, or simply an <code class="docutils literal notranslate"><span class="pre">Exception</span></code>.  For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Print ``&quot;hello_world&quot;``</span>

<span class="sd">    .. deprecated:: 0.4.0</span>
<span class="sd">        This function has been deprecated.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;`my_function` has been deprecated&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can create a custom <code class="docutils literal notranslate"><span class="pre">DepricationError</span></code> since
there is no built-in depreciation error within Python.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DeprecationError</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Used for depreciated methods and functions.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;This feature has been depreciated&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Empty init.&quot;&quot;&quot;</span>
        <span class="ne">RuntimeError</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>Then simply use that inplace of <code class="docutils literal notranslate"><span class="pre">Exception</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Print ``&quot;hello_world&quot;``</span>

<span class="sd">    .. deprecated:: 0.4.0</span>
<span class="sd">        This function has been deprecated.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="n">DeprecationError</span><span class="p">(</span><span class="s1">&#39;`my_function` has been deprecated&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="notes-regarding-semantic-versioning-and-api-changes">
<h2>Notes Regarding Semantic Versioning and API Changes<a class="headerlink" href="#notes-regarding-semantic-versioning-and-api-changes" title="Permalink to this headline">¶</a></h2>
<p>According to <a class="reference external" href="https://semver.org/">Semantic Versioning</a>, you should
increment the MAJOR version when you make incompatible changes.
However, adding or eliminating methods should not be considered
incompatible changes to a code base, but rather incremental changes
what are backwards compatible (to a degree).  Therefore, whenever a
method or feature is added, changed, or removed, the minor version
should be bumped.</p>
<p>To avoid constantly bumping the minor version, one approach to for
source-control branching is to create release branches where only
patch fixes are pushed to, and API changes occur between minor
releases.  See <a class="reference external" href="https://trunkbaseddevelopment.com/">Trunk Based Development</a>.  In summary, the mainline
branch (commonly named <code class="docutils literal notranslate"><span class="pre">main</span></code> or <code class="docutils literal notranslate"><span class="pre">master</span></code> must be already read to
release, and developers should create release branches to maintain at
least of one prior minor version.</p>
<p>The reason behind this is if a user wants to use API 0.4.0 instead of
0.5.0 due to some pressing deadline where they want to avoid a code
refactor, the maintainers of the API can back-port a bug-fix via <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">cherry-pick</span> <span class="pre">&lt;COMMIT-HASH&gt;</span></code>.  This way users are given some time to
update any projects dependent on the API while still being treated as
“first-class” users.  Note that due to the complexity of maintaining
multiple “release branches” in a repository, the number of active
release branches should be between one and three.</p>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, ANSYS.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.1.1.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>